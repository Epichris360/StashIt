{{>headDash}}
    <!-- Content
	================================================== -->
	<div class="dashboard-content">
		<!-- Titlebar -->
		<div id="titlebar">
			<div class="row">
				<div class="col-md-12">
					<h2>Show Active Stashes</h2>
					
					<nav id="breadcrumbs">
						<ul>
							<li><a href="/">Home</a></li>
							<li><a href="/dashboard">Dashboard</a></li>
							<li>Show Active Stashes</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12 col-md-3 col-lg-3" >
				<label>Search for Ticket Number:</label>
			</div>
			<div class="col-sm-12 col-md-6 col-lg-6">
				<input type="text" name="search" id="searchTerm" placeholder="Search" >
			</div>
			<div class="col-sm-12 col-md-3 col-lg-3" >
				<button class="button" id="searchBtn" >Search</button>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<table class="table" >
					<thead>
						<tr>
							<th>Ticket Number</th>
							<th>Sum Total</th>
							<th>Number of Bags</th>
							<th>Number of Days</th>
							<th>Status</th>
						</tr>
					</thead>
					<tbody>
						{{#stashed}}
						<tr>
							<td>{{ticket}}</td>
							<td>{{sumTotal}}</td>
							<td>{{qtyBags}}</td>
							<td>{{days}}</td>
							<td  >
								<button class="btn {{status.btnColor}} {{status.class}}" 
									data-id="{{id}}" data-name="CheckIn" data-status-id="{{status.id}}"
								>
									{{status.name}}
								</button>
							</td>
						</tr>
						{{/stashed}}
					</tbody>
				</table>
            </div>
        </div>
    </div>

    {{>scriptsDash}}
    <!-- For file uploading. Remove if file upload not necessry -->
	<script type="text/javascript" src="/js/dropzone.js"></script> 
	<!-- Turbo CDN. Better to use CDN than to store locally. -->
	<script type="text/javascript" src="https://cdn.turbo360-dev.com/dist/turbo.min.js"></script>
	<!-- sweet alert -->
  	<script type="text/javascript" 
                src="https://unpkg.com/sweetalert2@7.0.9/dist/sweetalert2.all.js" ></script> 

	<script type="text/javascript" >
		$(function(){
			$("#searchBtn").on('click', function(e){
				e.preventDefault()
				const searchTerm = $("#searchTerm").val()
				console.log('searchTerm: ',searchTerm)
			})

			$(".check-in").on('click', function(e){
				const checkInID = $(this).attr("data-id") 
				const statusID  = $(this).attr("data-status-id")
				$.ajax({
					url: '/dashboard/change-status',
					data: {
						format:    'json',
						checkInID: checkInID,
						statusID:  statusID
					},
					error: function(err) {
                        console.log('err: ',err)
					},
					dataType: 'json',
					success: function(data) {
                        console.log('data: ', data)
					},
					type: 'POST'
				})
			})

			$(".checkOutBtn").on('click', function(e){
				const checkOutID = $(this).attr("data-id")
			}) 
		})
	</script>
    </body> 
</html>

